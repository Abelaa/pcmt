######################################################################
# Copyright (c) 2020, VillageReach
# Licensed under the Non-Profit Open Software License version 3.0.
# SPDX-License-Identifier: NPOSL-3.0
######################################################################

services:
    ### overrides category-tree controller
    pim_enrich.controller.category_tree.product:
        class: PcmtPermissionsBundle\Controller\CategoryTreeController
        arguments:
            - '@event_dispatcher'
            - '@pim_user.context.user'
            - '@pim_catalog.saver.category'
            - '@pim_catalog.remover.category'
            - '@pim_catalog.factory.category'
            - '@pim_catalog.repository.category'
            - '@oro_security.security_facade'
            - { related_entity: product, form_type: 'PcmtPermissionsBundle\Form\CategoryType', acl: pim_enrich_product, route: pim_enrich }
        calls:
            - [ setCategoryChildrenPermissionsUpdater, ['@pcmt_permissions.updater.category_children_permissions']]
            - [ setCategoryPermissionsDefaultProvider, ['@pcmt.service.category_permissions_default_provider']]
